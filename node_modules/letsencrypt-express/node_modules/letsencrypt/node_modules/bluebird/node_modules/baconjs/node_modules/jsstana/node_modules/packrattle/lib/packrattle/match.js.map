{"version":3,"sources":["../../src/packrattle/match.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;;;uBAES,WAAW;;;;;;IAKZ,KAAK;AACb,WADQ,KAAK,CACZ,EAAE,EAAE,KAAK,EAAgB;QAAd,OAAO,yDAAG,EAAE;;0BADhB,KAAK;;AAEtB,QAAI,CAAC,EAAE,GAAG,EAAE,CAAC;AACb,QAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,QAAI,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;;AAE7B,QAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;;AAE3B,QAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;GACpC;;eATkB,KAAK;;WAWlB,gBAAC,KAAK,EAAE;AACZ,aAAO,IAAI,CAAC,EAAE,IAAI,KAAK,CAAC,EAAE,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,CAAC;KAC9F;;;WAEO,oBAAG;AACT,UAAM,MAAM,GAAG,CACb,IAAI,CAAC,EAAE,GAAG,KAAK,GAAG,IAAI,EACtB,QAAQ,GAAG,IAAI,CAAC,KAAK,EACrB,SAAS,GAAG,aAxBT,KAAK,EAwBU,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,CACpC,CAAC;AACF,UAAI,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACvC,aAAO,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC;KAC3C;;;WAEQ,mBAAC,KAAK,EAAE;AACf,aAAO,IAAI,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;KACxC;;;WAEQ,mBAAC,KAAK,EAAE;AACf,UAAM,EAAE,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AAChD,QAAE,CAAC,KAAK,GAAG,KAAK,CAAC;AACjB,aAAO,EAAE,CAAC;KACX;;;WAEM,iBAAC,OAAO,EAAE;AACf,UAAM,EAAE,GAAG,IAAI,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AAC9C,QAAE,CAAC,KAAK,GAAG,OAAO,CAAC;AACnB,QAAE,CAAC,SAAS,GAAG,KAAK,CAAC;AACrB,aAAO,EAAE,CAAC;KACX;;;WAEqB,gCAAC,OAAO,EAAE;AAC9B,UAAI,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,IAAI,CAAC;AACjC,UAAM,EAAE,GAAG,IAAI,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AAC9C,QAAE,CAAC,KAAK,GAAG,OAAO,CAAC;AACnB,aAAO,EAAE,CAAC;KACX;;;WAEQ,qBAAG;AACV,UAAM,EAAE,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AAChD,QAAE,CAAC,MAAM,GAAG,IAAI,CAAC;AACjB,aAAO,EAAE,CAAC;KACX;;;SArDkB,KAAK;;;qBAAL,KAAK","file":"match.js","sourcesContent":["\"use strict\";\n\nimport { quote } from \"./strings\";\n\n/*\n * created by ParserState on demand.\n */\nexport default class Match {\n  constructor(ok, state, options = {}) {\n    this.ok = ok;\n    this.state = state;\n    this.commit = options.commit;\n    // either a boxed result or an error message:\n    this.value = options.value;\n    // is this an auto-generated error message?\n    this.generated = options.generated;\n  }\n\n  equals(other) {\n    return this.ok == other.ok && this.state.pos == other.state.pos && this.value == other.value;\n  }\n\n  toString() {\n    const fields = [\n      this.ok ? \"yes\" : \"no\",\n      \"state=\" + this.state,\n      \"value='\" + quote(this.value) + \"'\"\n    ];\n    if (this.commit) fields.push(\"commit\");\n    return \"Match(\" + fields.join(\", \") + \")\";\n  }\n\n  withState(state) {\n    return new Match(this.ok, state, this);\n  }\n\n  withValue(value) {\n    const rv = new Match(this.ok, this.state, this);\n    rv.value = value;\n    return rv;\n  }\n\n  toError(message) {\n    const rv = new Match(false, this.state, this);\n    rv.value = message;\n    rv.generated = false;\n    return rv;\n  }\n\n  changeGeneratedMessage(message) {\n    if (!this.generated) return this;\n    const rv = new Match(false, this.state, this);\n    rv.value = message;\n    return rv;\n  }\n\n  setCommit() {\n    const rv = new Match(this.ok, this.state, this);\n    rv.commit = true;\n    return rv;\n  }\n}\n"]}